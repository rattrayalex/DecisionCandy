{% extends "base.html" %}

{% block title %}{{ block.super }} | Rank {{ Project.name }} {% endblock %}

{% block headcode %}
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.5.1/jquery.min.js"></script>
<script type="text/javascript">
  var progress = 0;
  var project = "{{ Project.name|escapejs }}";
  
  function vote(w, l){
	  w = w.replace('.', '___');
	  l = l.replace('.', '___');
	  var url = "/vote/w/" + w + "/l/" + l + "/";
	  alert(url)
	  $.post(url);
//	  $.ajax({
//                data: {
//                    somedata: 'somedata',
//                    moredata: 'moredata',
//                    csrfmiddlewaretoken: '{{ csrf_token }}'
//                },
	  updateList();
  }
  
  function updateList(){
    if (progress < 10) {
      progress += 1;
      var url = "../../../choices/" + project.replace(' ','%20');
      $("div#main").load(url);
      $("div#progress").html(progress);
    }
    else {
      var url = "../../../thanks/"+ project.replace(' ','%20');
      $('div#content').load(url);
    }
  }

$(document).ready(function() {
    updateList();
    });
  </script>
  {% endblock %}

  {% block content %}

  <div class="bigtext frontcenter bluetext" id="whichone">Which one...</div>

  <div class="bigtext orangetext" id="isbest" title="{{ Project.more_criteria }}">
    {{ Project.criteria }}?
    <div class="littlelink">
      <a href="#" title="{{ Project.more_criteria }}">
        more criteria
      </a>
    </div>
  </div>

  <div id="main">
  </div>


  <!--everything below the ranking goes here -->
  <div class="belowranking">   
    <div class="projectinfo">
      <div class="bigtext">Information about {{ Project.name }}</div>
      <div id="projdescription"> {{ Project.description }} </div>
    </div>
  </div>

  <div class="progressbar">
    <div id="progress">
    </div>
    <br/>
    {% if Project.reward > 0 %}$
    {{ Project.reward }}
    {% endif %}
  </div>
</div>

{% endblock content %}
